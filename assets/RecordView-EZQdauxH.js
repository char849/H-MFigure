import{_ as T}from"./Object07-uL3_ycV8.js";import{a as w}from"./axios-L6U4YIEh.js";import{r as u,h as j,a as _,o as r,c as m,b as e,d as l,e as F,f as x,t as n,F as I,i as N,j as O,n as b}from"./index-tl5hnZC_.js";var P={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"charlotte-lee849",BASE_URL:"/H-MFigure/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const S={class:"box-bg01"},$={class:"container"},A={class:"row"},B=e("div",{class:"col-12 text-dark mt-3 mt-md-6","data-aos":"fade-down"},[e("div",{class:"mx-auto text-center OBJECTS"},[e("div",{class:"fw-bold title mb-0"},"交易記錄查詢"),e("span",{class:"text-info fs-4"},"Transaction History Inquiry")])],-1),C={class:"row class justify-content-center mx-auto","data-aos":"fade-up"},L={class:"col-12 col-md-8 mb-6 mb-xl-0"},M={class:"d-flex justify-content-center mt-0 mt-md-4"},D={class:"mb-3"},H=e("label",{for:"name",class:"form-label"},"同學姓名",-1),R={class:"mb-3"},U=e("label",{for:"tel",class:"form-label"},"同學電話",-1),q=e("div",{class:"text-end mb-0 mb-md-5"},[e("button",{type:"submit",class:"btn btn-danger rounded-pill my-2 my-md-3 my-xl-4 ps-6 pe-5 py-3"}," 訂單查詢 ")],-1),z={class:"col-12 col-md-8 mb-6 mb-xl-0 mt-md-3"},J={key:0,class:"mt-2 mb-4 fs-3 ms-1 fw-medium text-dark text-center","data-aos":"fade-up"},G=e("i",{class:"bi bi-journal-check"},null,-1),K={key:1,"data-aos":"fade-up"},Q=e("div",{class:"mt-2 mb-4 fs-3 ms-1 fw-medium text-dark text-center"},[e("i",{class:"bi bi-journal-bookmark-fill"}),x(" 您的課程交易記錄 ")],-1),W={class:"text-right my-3 text-danger"},X={class:"table"},Y=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"訂單編號"),e("th",{scope:"col"},"訂單姓名"),e("th",{scope:"col"},"訂單日期"),e("th",{scope:"col"},"訂單總額"),e("th",{scope:"col"},"付款狀態")])],-1),Z={scope:"row",class:"text-dark"},ee={class:"text-dark"},se={class:"text-dark"},te={class:"text-dark"},ae={class:"text-dark"},oe=e("div",{class:"d-flex justify-content-end my-md-5","data-aos":"fade-right"},[e("img",{src:T,class:"box-bg08 pb-6 d-none d-md-block",alt:"Object08"})],-1),ie={__name:"RecordView",setup(le){const{VITE_API:g,VITE_PATH:y}=P,h=u({}),d=u({}),c=u(!1),o=u({user:{name:"",tel:""},message:""}),V=s=>/(^09|\+?8869)\d{2}(-?\d{3}-?\d{3})$/.test(s)?!0:"需要正確的電話號碼",p=()=>{c.value=!0,w.get(`${g}/api/${y}/orders`).then(s=>{c.value=!1,h.value=s.data.orders,d.value=h.value.filter(t=>t.user.name===o.value.user.name&&t.user.tel===o.value.user.tel),console.log(s.data.orders)}).catch(s=>{c.value=!1,console.log("error",s.response.data.message)})};return j(()=>{p()}),(s,t)=>{const v=_("VeeField"),f=_("ErrorMessage"),k=_("VeeForm"),E=_("VueLoading");return r(),m("section",S,[e("div",$,[e("div",A,[B,e("div",C,[e("div",L,[e("div",M,[l(k,{class:"col-12",onSubmit:p},{default:F(({errors:a})=>[e("div",D,[H,l(v,{id:"name",name:"姓名",type:"text",class:b(["form-control py-3",{"is-invalid":a.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.value.user.name,"onUpdate:modelValue":t[0]||(t[0]=i=>o.value.user.name=i)},null,8,["class","modelValue"]),l(f,{name:"姓名",class:"invalid-feedback"})]),e("div",R,[U,l(v,{id:"tel",name:"電話",type:"tel",class:b(["form-control py-3",{"is-invalid":a.電話}]),placeholder:"請輸入電話",rules:V,modelValue:o.value.user.tel,"onUpdate:modelValue":t[1]||(t[1]=i=>o.value.user.tel=i)},null,8,["class","modelValue"]),l(f,{name:"電話",class:"invalid-feedback"})]),q]),_:1})])]),l(E,{active:c.value,"z-index":1060,class:"text-center"},null,8,["active"]),e("div",z,[!c.value&&d.value.length===0?(r(),m("div",J,[G,x(" 請輸入訂購時的姓名、電話進行查詢交易記錄 ")])):d.value.length>0?(r(),m("div",K,[Q,e("div",W," 共 "+n(d.value.length)+" 筆記錄 ",1),(r(!0),m(I,null,N(d.value,(a,i)=>(r(),m("div",{key:i,class:"mb-3"},[e("table",X,[Y,e("tbody",null,[e("tr",null,[e("th",Z,n(a.id),1),e("td",ee,n(a.user.name),1),e("td",se,n(s.$filters.date(a.paid_date)),1),e("td",te," NT $"+n(s.$filters.currency(a.total)),1),e("td",ae,n(a.is_paid?"已付款":"未付款"),1)])])])]))),128))])):O("",!0)])])])]),oe])}}};export{ie as default};
