import{z as T,r as o,A as I,j as A}from"./index-mrqZWbxK.js";import{a as l}from"./axios-L6U4YIEh.js";import{S as a}from"./sweetalert2.all-ACF6TmEg.js";var S={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"charlotte-lee849",BASE_URL:"/H-MFigure/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:n,VITE_PATH:c}=S,L=T("cartStore",()=>{const t=o(!1),u=I([]),d=o(0),v=o(0),f=o(0),i=o(""),r=()=>{t.value=!0,l.get(`${n}api/${c}/cart`).then(e=>{u.splice(0),u.push(...e.data.data.carts),d.value=e.data.data.final_total,v.value=e.data.data.total,f.value=u.length,t.value=!1}).catch(e=>{a.fire("pinia cart:",e),t.value=!1})},h=e=>{const s={product_id:e,qty:1};t.value=!0,l.post(`${n}api/${c}/cart`,{data:s}).then(()=>{t.value=!1,r(),a.fire("己加入預約清單")})},m=e=>{i.value=e,t.value=!0,l.delete(`${n}/api/${c}/cart/${e}`).then(()=>{t.value=!1,r(),i.value="",a.fire("己取消單一預約課程")}).catch(s=>{t.value=!1,a.fire(s.response.data.message)})},p=()=>{t.value=!0,l.delete(`${n}/api/${c}/carts`).then(()=>{t.value=!1,r(),a.fire("己取消所有預約課程")}).catch(e=>{t.value=!1,a.fire(e.response.data.message)})},_=()=>{a.fire({title:"確認清空預約課程",text:"您確定要清空所有預約課程嗎？",icon:"warning",showCancelButton:!0,confirmButtonText:"是的，清空",cancelButtonText:"取消",reverseButtons:!0}).then(e=>{e.isConfirmed&&p()})},g=e=>{const s={product_id:e.product_id,qty:e.qty};t.value=!0,i.value=e.id,l.put(`${n}/api/${c}/cart/${e.id}`,{data:s}).then(()=>{r(),t.value=!1,i.value="",a.fire("己更改預約人數")}).catch(C=>{t.value=!1,a.fire(C.response.data.message)})},$=()=>{f.value=0};return A(()=>{r()}),{cart:u,finalTotal:d,cartsLength:f,total:v,getCart:r,addToCart:h,removeCartItem:m,deleteAllCarts:p,confirmDeleteAllCarts:_,updateCartItem:g,clearCartLength:$}});export{L as u};
