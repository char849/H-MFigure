import{_ as w}from"./Object07-uL3_ycV8.js";import{S as T}from"./sweetalert2.all-87-aXTaO.js";import{a as S}from"./axios-L6U4YIEh.js";import{r as u,h as j,a as _,o as r,c as m,b as e,d as l,e as F,f as x,t as n,F as I,i as N,j as O,n as b}from"./index-EYjcDT40.js";var P={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"charlotte-lee849",BASE_URL:"/H-MFigure/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const $={class:"box-bg01"},A={class:"container"},B={class:"row"},C=e("div",{class:"col-12 text-dark mt-3 mt-md-6","data-aos":"fade-down"},[e("div",{class:"mx-auto text-center OBJECTS"},[e("div",{class:"fw-bold title mb-0"},"交易記錄查詢"),e("span",{class:"text-info fs-4"},"Transaction History Inquiry")])],-1),L={class:"row class justify-content-center mx-auto","data-aos":"fade-up"},M={class:"col-12 col-md-8 mb-6 mb-xl-0"},D={class:"d-flex justify-content-center mt-0 mt-md-4"},H={class:"mb-3"},R=e("label",{for:"name",class:"form-label"},"同學姓名",-1),U={class:"mb-3"},q=e("label",{for:"tel",class:"form-label"},"同學電話",-1),z=e("div",{class:"text-end mb-0 mb-md-5"},[e("button",{type:"submit",class:"btn btn-danger rounded-pill my-2 my-md-3 my-xl-4 ps-6 pe-5 py-3"}," 訂單查詢 ")],-1),J={class:"col-12 col-md-8 mb-6 mb-xl-0 mt-md-3"},G={key:0,class:"mt-2 mb-4 fs-3 ms-1 fw-medium text-dark text-center","data-aos":"fade-up"},K=e("i",{class:"bi bi-journal-check"},null,-1),Q={key:1,"data-aos":"fade-up"},W=e("div",{class:"mt-2 mb-4 fs-3 ms-1 fw-medium text-dark text-center"},[e("i",{class:"bi bi-journal-bookmark-fill"}),x(" 您的課程交易記錄 ")],-1),X={class:"text-right my-3 text-danger"},Y={class:"table"},Z=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"訂單編號"),e("th",{scope:"col"},"訂單姓名"),e("th",{scope:"col"},"訂單日期"),e("th",{scope:"col"},"訂單總額"),e("th",{scope:"col"},"付款狀態")])],-1),ee={scope:"row",class:"text-dark"},se={class:"text-dark"},te={class:"text-dark"},ae={class:"text-dark"},oe={class:"text-dark"},le=e("div",{class:"d-flex justify-content-end my-md-5","data-aos":"fade-right"},[e("img",{src:w,class:"box-bg08 pb-6 d-none d-md-block",alt:"Object08"})],-1),me={__name:"RecordView",setup(ne){const{VITE_API:g,VITE_PATH:y}=P,p=u({}),d=u({}),c=u(!1),o=u({user:{name:"",tel:""},message:""}),V=s=>/(^09|\+?8869)\d{2}(-?\d{3}-?\d{3})$/.test(s)?!0:"需要正確的電話號碼",h=()=>{c.value=!0,S.get(`${g}/api/${y}/orders`).then(s=>{c.value=!1,p.value=s.data.orders,d.value=p.value.filter(t=>t.user.name===o.value.user.name&&t.user.tel===o.value.user.tel)}).catch(s=>{c.value=!1,T.fire("error",s.response.data.message)})};return j(()=>{h()}),(s,t)=>{const f=_("VeeField"),v=_("ErrorMessage"),k=_("VeeForm"),E=_("VueLoading");return r(),m("section",$,[e("div",A,[e("div",B,[C,e("div",L,[e("div",M,[e("div",D,[l(k,{class:"col-12",onSubmit:h},{default:F(({errors:a})=>[e("div",H,[R,l(f,{id:"name",name:"姓名",type:"text",class:b(["form-control py-3",{"is-invalid":a.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.value.user.name,"onUpdate:modelValue":t[0]||(t[0]=i=>o.value.user.name=i)},null,8,["class","modelValue"]),l(v,{name:"姓名",class:"invalid-feedback"})]),e("div",U,[q,l(f,{id:"tel",name:"電話",type:"tel",class:b(["form-control py-3",{"is-invalid":a.電話}]),placeholder:"請輸入電話",rules:V,modelValue:o.value.user.tel,"onUpdate:modelValue":t[1]||(t[1]=i=>o.value.user.tel=i)},null,8,["class","modelValue"]),l(v,{name:"電話",class:"invalid-feedback"})]),z]),_:1})])]),l(E,{active:c.value,"z-index":1060,class:"text-center"},null,8,["active"]),e("div",J,[!c.value&&d.value.length===0?(r(),m("div",G,[K,x(" 請輸入訂購時的姓名、電話進行查詢交易記錄 ")])):d.value.length>0?(r(),m("div",Q,[W,e("div",X," 共 "+n(d.value.length)+" 筆記錄 ",1),(r(!0),m(I,null,N(d.value,(a,i)=>(r(),m("div",{key:i,class:"mb-3"},[e("table",Y,[Z,e("tbody",null,[e("tr",null,[e("th",ee,n(a.id),1),e("td",se,n(a.user.name),1),e("td",te,n(s.$filters.date(a.paid_date)),1),e("td",ae," NT $"+n(s.$filters.currency(a.total)),1),e("td",oe,n(a.is_paid?"已付款":"未付款"),1)])])])]))),128))])):O("",!0)])])])]),le])}}};export{me as default};
