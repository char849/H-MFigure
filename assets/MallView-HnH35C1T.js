import{r as b,u as A,a as m,o as r,c,d,f as i,b as e,F as y,l as g,g as U,t as f,e as V,j as D,v as w,x as M,n as v,y as P,h as C}from"./index-yC9jJfhG.js";import{S as k}from"./sweetalert2.all-vGwb5cxU.js";import{a as j}from"./axios-L6U4YIEh.js";import{u as B}from"./cartStore-bK_v-5sN.js";var O={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"charlotte-lee849",BASE_URL:"/H-MFigure/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const q={class:"container-fulid box-bg_Nine"},H={key:0,class:"container mt-6 mt-md-7 mb-6 mb-md-5"},z=D('<ul class="row justify-content-center list-unstyled py-3 px-3" data-aos="fade-down"><li class="col-4 col-md-4"><div class="bg-danger p-3 px-1 badge rounded-pill mall_w w-100 mb-2 bg-secondary text-white"> 1. 填寫資料 </div></li><li class="col-4 col-md-4"><div class="p-3 px-1 badge rounded-pill mall_w w-100 mb-2 bg-info text-muted"> 2. 課程結帳 </div></li><li class="col-4 col-md-4"><div class="p-3 px-1 badge rounded-pill mall_w w-100 mb-2 bg-info text-muted"> 3. 付款完成 </div></li></ul><div class="col-12 text-dark mt-1 mt-md-4" data-aos="fade-down"><div class="mx-auto text-center OBJECTS"><div class="fw-bold title mb-0">預約清單</div><span class="text-info fs-4">Course Reservation List</span></div></div>',2),J={class:"row justify-content-center order mx-1","data-aos":"fade-up"},G={class:"col-12 col-md-8"},K={class:"col-12"},Q={class:"text-end"},W=["disabled"],X={class:"table align-middle"},Y=e("thead",null,[e("tr",null,[e("th"),e("th",{class:"text-nowrap"},"課程名稱"),e("th",{class:"text-nowrap"},"上課人數 / 位"),e("th"),e("th",{class:"text-end"},"單價")])],-1),Z=["onClick","disabled"],ee=e("i",{class:"bi bi-x fs-6 fs-md-5"},null,-1),se=[ee],te={class:"px-2"},le={class:"input-group input-group-sm"},ae={class:"input-group my-3"},oe=["onUpdate:modelValue","onChange","disabled"],de=["value"],ne=e("td",null,null,-1),ie={class:"text-end"},re=e("td",{colspan:"4",class:"text-end fw-bold"},"總計",-1),ce={class:"text-end"},me={class:"col-12"},ue={class:"d-flex justify-content-center mt-5 mt-md-7"},_e={class:"mb-3"},pe=e("div",{class:"mt-2 mb-4 fs-3 ms-1 fw-medium text-dark text-center"},[e("i",{class:"bi bi-feather fs-1 me-2"}),C(" 請填寫個人資料 ")],-1),be=e("label",{for:"email",class:"form-label"},"Email*",-1),fe={class:"mb-3"},ve=e("label",{for:"name",class:"form-label"},"同學姓名*",-1),he={class:"mb-3"},xe=e("label",{for:"tel",class:"form-label"},"聯絡電話*",-1),ye={class:"mb-3"},ge=e("label",{for:"address",class:"form-label"},"聯絡地址*",-1),Ve={class:"mb-3"},we=e("label",{for:"message",class:"form-label"},"留言",-1),ke={class:"text-end mb-0 mb-md-5"},Ce=["disabled"],Ee={key:1,class:"text-center mb-7 mb-md-9 pt-7 pt-md-9"},Le=e("h2",{class:"text-info"},"返回模型課程",-1),$e=e("p",{class:"display-3 text-info my-4 mb-6 mx-2"}," 預約課程列表目前尚無課程!!! ",-1),Te={__name:"MallView",setup(Ie){const a=B(),{VITE_API:E,VITE_PATH:L}=O,h=b(null),$=A(),u=b(!1),x=b(""),o=b({user:{name:"",email:"",tel:"",address:""},message:""}),I=n=>/(^09|\+?8869)\d{2}(-?\d{3}-?\d{3})$/.test(n)?!0:"需要正確的電話號碼",S=n=>/^[\u4E00-\u9FA5]{2,4}$/.test(n)?!0:"請輸入有效的中文姓名",N=()=>{u.value=!0;const n=o.value;j.post(`${E}api/${L}/order`,{data:n}).then(s=>{x.value=s.data.orderId,$.push(`/order/${x.value}`),k.fire("己成功預約課程"),h.value.resetForm(),u.value=!1,a.clearCartLength()}).catch(s=>{u.value=!1,k.fire(s.response.data.message)})};return(n,s)=>{const F=m("VueLoading"),_=m("VeeField"),p=m("ErrorMessage"),R=m("VeeForm"),T=m("RouterLink");return r(),c("div",q,[d(F,{active:u.value,"z-index":1060,class:"text-center"},null,8,["active"]),i(a).cartsLength>0?(r(),c("div",H,[z,e("div",J,[e("div",G,[e("div",K,[e("div",Q,[e("button",{class:"btn btn-outline-danger rounded-pill my-2 my-md-3 my-xl-5 ps-6 pe-5 py-3 mb-4",type:"button",onClick:s[0]||(s[0]=(...t)=>i(a).confirmDeleteAllCarts&&i(a).confirmDeleteAllCarts(...t)),disabled:i(a).cart.length===0}," 清空預約課程 ",8,W)]),e("table",X,[Y,e("tbody",null,[i(a).cart.length>0?(r(!0),c(y,{key:0},g(i(a).cart,t=>(r(),c("tr",{key:t.id},[e("td",null,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>i(a).removeCartItem(t.id),disabled:n.isLoadingItem===t.id},se,8,Z)]),e("td",te,f(t.product.title),1),e("td",null,[e("div",le,[e("div",ae,[w(e("select",{class:"form-select rounded-end","onUpdate:modelValue":l=>t.qty=l,onChange:l=>i(a).updateCartItem(t),disabled:n.isLoadingItem===t.id},[(r(),c(y,null,g(5,l=>e("option",{value:l,key:`${l}-${t.id}`},f(l),9,de)),64))],40,oe),[[M,t.qty]])])])]),ne,e("td",ie," $"+f(n.$filters.currency(t.total)),1)]))),128)):U("",!0)]),e("tfoot",null,[e("tr",null,[re,e("td",ce," $"+f(n.$filters.currency(i(a).total)),1)])])])]),e("div",me,[e("div",ue,[d(R,{ref_key:"formRef",ref:h,class:"col-12",onSubmit:N},{default:V(({errors:t})=>[e("div",_e,[pe,be,d(_,{id:"email",name:"email",type:"email",class:v(["form-control py-3",{"is-invalid":t.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:o.value.user.email,"onUpdate:modelValue":s[1]||(s[1]=l=>o.value.user.email=l)},null,8,["class","modelValue"]),d(p,{name:"email",class:"invalid-feedback"})]),e("div",fe,[ve,d(_,{id:"name",name:"姓名",type:"text",class:v(["form-control py-3",{"is-invalid":t.姓名}]),placeholder:"請輸入姓名",rules:S,modelValue:o.value.user.name,"onUpdate:modelValue":s[2]||(s[2]=l=>o.value.user.name=l)},null,8,["class","modelValue"]),d(p,{name:"姓名",class:"invalid-feedback"})]),e("div",he,[xe,d(_,{id:"tel",name:"電話",type:"tel",class:v(["form-control py-3",{"is-invalid":t.電話}]),placeholder:"請輸入電話",rules:I,modelValue:o.value.user.tel,"onUpdate:modelValue":s[3]||(s[3]=l=>o.value.user.tel=l)},null,8,["class","modelValue"]),d(p,{name:"電話",class:"invalid-feedback"})]),e("div",ye,[ge,d(_,{id:"address",name:"地址",type:"text",class:v(["form-control py-3",{"is-invalid":t.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:o.value.user.address,"onUpdate:modelValue":s[4]||(s[4]=l=>o.value.user.address=l)},null,8,["class","modelValue"]),d(p,{name:"地址",class:"invalid-feedback"})]),e("div",Ve,[we,w(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[5]||(s[5]=l=>o.value.message=l)},null,512),[[P,o.value.message]])]),e("div",ke,[e("button",{type:"submit",class:"btn btn-danger rounded-pill my-2 my-md-3 my-xl-4 px-5 py-3",disabled:Object.keys(t).length>0||i(a).cartsLength===0}," 確定預約 ",8,Ce)])]),_:1},512)])])])])])):(r(),c("div",Ee,[Le,$e,d(T,{to:"/products",class:"fs-5 btn btn-danger rounded-5 py-3 px-5"},{default:V(()=>[C(" 查看課程 ! ")]),_:1})]))])}}};export{Te as default};
